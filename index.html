<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Sonus Mentis</title>

<style>
body { font-family: Arial; margin: 40px; }
h1 { margin-bottom: 10px; }
p { margin-bottom: 20px; }
#menu { display: flex; flex-wrap: wrap; gap: 15px; }
.menu-item {
  background-color: #f2f2f2;
  padding: 10px 20px;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  font-weight: bold;
  transition: 0.2s;
}
.menu-item:hover {
  background-color: #4CAF50;
  color: white;
}
</style>
</head>

<body>

<h1>Sonus Mentis</h1>
<p>Первый корпус речи русскоязычных пациентов с нейродегенеративными заболеваниями</p>
<p>Выберите диагноз:</p>

<div id="menu"></div>

<script>
fetch('metadata.json')
  .then(r => r.json())
  .then(data => {
    const menu = document.getElementById('menu');

    // Группируем по диагнозу и считаем количество и длительность
    const grouped = {};
    data.forEach(x => {
      if (!grouped[x.diagnosis]) grouped[x.diagnosis] = { count: 0, total: 0 };
      grouped[x.diagnosis].count += 1;
      grouped[x.diagnosis].total += x.duration;
    });

    for (const diag in grouped) {
      const info = grouped[diag];
      const a = document.createElement('a');
      a.href = `diagnosis.html?d=${encodeURIComponent(diag)}`;
      a.className = 'menu-item';
      a.innerText = diag;
      menu.appendChild(a);
    }
  });
</script>

</body>
</html>
